(()=>{"use strict";const e=e=>{const t=[];for(let r=0;r<e;r++)t.push("-");return{getLength:()=>e,hit:e=>{t[e]="X"},isSunk:()=>!!t.every((e=>"X"==e)),getHealth:()=>t,length:e}},t=()=>{const t=[5,4,3,3,2],r=[],n=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]];function a(){return n.reduce(((e,t)=>e.map(((e,r)=>t[r]+e)))).reduce(((e,t)=>e+t))}function o(){const e=["vertical","horizontal"];return e[Math.floor(Math.random()*e.length)]}function i(){return[Math.floor(10*Math.random()),Math.floor(10*Math.random())]}function l(e,t,r){let a,o=t[0],i=t[1];if("horizontal"==r?a=o:"vertical"==r&&(a=i),e+a>10)return!1;if("horizontal"==r)for(let t=0;t<e;t++)if(0!=n[i][o+t])return!1;if("vertical"==r)for(let t=0;t<e;t++)if(0!=n[i+t][o])return!1;return!0}function u(e,t,r){let a=t[0],o=t[1],i=[];if("horizontal"==r)for(let t=0;t<e;t++)n[o][a+t]=1,i.push([a+t,o]);if("vertical"==r)for(let t=0;t<e;t++)n[o+t][a]=1,i.push([a,o+t]);return i}function s(e,t){for(let r in e){let n=e[r],a=!1;for(let e in n){if(n[e]!=t[e]){a=!1;break}a=!0}if(1==a)return r}return-1}function c(e){let t=e[0],r=e[1];n[r][t]="X"}function m(e){for(let t=0;t<r.length;t++){let n=r[t],a=s(n.coordinates,e);a>=0&&(n.ship.hit(a),n.ship.isSunk())}}return{allSunk:function(){return r.every((e=>1==e.ship.isSunk()))},receiveAttack:function(e){let t=e[0],r=e[1];return 1==n[r][t]?(m(e),c(e),"hit"):0==n[r][t]?(n[r][t]="O","miss"):"illegal move"},registerHitOnShip:m,registerHitOnBoard:c,generateShips:function(){let n,s,c,m=0,f=0;for(;m<t.length;){if(n=t[m],s=i(),c=o(),l(n,s,c)){let t=u(n,s,c);m++,r.push({ship:e(n),coordinates:t})}f++}return{sum:a(),attempts:f}},placeShip:u,randomOrientation:o,randomCoordinate:i,getSumTotalSegments:a,validShipPlacement:l,getBoard:function(){return n},getFleet:function(){return r},checkArrayExistsinArray:s,checkPosition:function(e){let t=e[0],r=e[1];return 1==n[r][t]?"hit":0==n[r][t]?"miss":"illegal move"},getData:function(){let e=0,t=0,r=0;for(let a in n)for(let o in n[a])"X"==n[a][o]&&e++,"O"==n[a][o]&&t++,"1"==n[a][o]&&r++;return{hitCount:e,missCount:t,segmentsLeft:r,total:e+r}}}};t().generateShips();const r=t,n=(e,t)=>{const n=r();return n.generateShips(),{isDead:()=>n.allSunk(),isTurn:!1,game:n,attack:(e,r)=>{if("computer"==t){let e,t=!1;for(;0==t;){let n=[Math.floor(10*Math.random()),Math.floor(10*Math.random())];if(console.log("COMPUTER RANDOM COORDIANTES ARE"+n[0]+n[1]),"miss"==r.game.checkPosition(n))return console.log("Computer missed."),e=r.game.receiveAttack(n),t=!0,e;console.log("Computer hit you."),e=r.game.receiveAttack(n);break}return e}if("human"==t)return r.game.receiveAttack(e)},type:t,getPlayerNumber:()=>e}},a=(()=>{const e=n(1,"human"),t=n(2,"computer");return e.isTurn=!0,{playerOne:e,playerTwo:t,turn:function r(n){let a,o;console.log("---------------------------"),console.log(e.game.getData()),console.log(t.game.getData()),e.isTurn?(a=e,o=t):(a=t,o=e);let i=a.attack(n,o);"hit"==i&&"computer"==a.type&&r(),"miss"==i&&(e.isTurn=!e.isTurn,t.isTurn=!t.isTurn),"miss"==i&&"human"==a.type&&(console.log("you missed, computers turn"),r()),"illegal move"==i&&"computer"==a.type&&r(),(e.isDead()||t.isDead())&&alert("game over")}}})();(()=>{function e(){t(a.playerOne),t(a.playerTwo),r(a.playerOne),r(a.playerTwo),n(a.playerOne),n(a.playerTwo),function(){const e=document.querySelector("[data-player-info='1']"),t=document.querySelector("[data-player-info='2']");e.textContent=a.playerOne.game.getData().hitCount+"/"+a.playerOne.game.getData().total,t.textContent=a.playerOne.game.getData().hitCount+"/"+a.playerTwo.game.getData().total}()}function t(e){let t=e.getPlayerNumber();const r=document.querySelector(`[data-player='${t}']`);r.innerHTML="";for(let t=0;t<10;t++)for(let n=0;n<10;n++){let a=e.game.getBoard(),o=document.createElement("div");o.classList.add("square"),o.dataset.row=t,o.dataset.column=n,o.classList.add("noselect");let i=a[t][n];"1"==i&&"human"==e.type&&o.classList.add("boat"),"O"==i&&o.classList.add("miss"),"X"==i&&o.classList.add("hit"),r.appendChild(o)}}function r(e){let t=e.getPlayerNumber();document.querySelectorAll(`[data-player="${t}"] > .square`).forEach((e=>{e.removeEventListener("click",(e=>{}))}))}function n(t){if(!t.isTurn){let r=t.getPlayerNumber();console.log(r+" ENABLED"),document.querySelectorAll(`[data-player="${r}"] > .square`).forEach((t=>{t.addEventListener("click",(r=>{let n=parseInt(t.getAttribute("data-row")),o=parseInt(t.getAttribute("data-column"));a.turn([o,n]),e()}))}))}}return{render:e}})().render()})();